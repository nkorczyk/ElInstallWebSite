package away3d.extrusions{   	import flash.display.BitmapData;	import away3d.core.math.Number3D;	public class Elevation {				public function Elevation()        {		}				public function generate(sourceBmd:BitmapData, channel:String = "r", subdivisionX:int = 10, subdivisionY:int = 10, scalingX:Number = 1, scalingY:Number = 1, elevate:Number = .5):Array		{			var totalArray:Array = new Array();			var w:int = sourceBmd.width;			var h:int = sourceBmd.height;			var i:int = 0;			var row:int = 1;			var col:int = 1;			var tmpArray:Array = new Array();			var x:Number = 0;			var y:Number = 0;			var z:Number = 0;			var color:uint;						while (i<(w*h)){										col+= subdivisionX;					x = (col-(w*.5));					y = (row-(h*.5));					color = sourceBmd.getPixel(col, row);					var cha:Number;										switch(channel){						case "a":							cha = color >> 24 & 0xFF;							break;						case "r":							cha = color >> 16 & 0xFF;							break;						case "g":							cha = color >> 8 & 0xFF;							break;						case "b":							cha = color & 0xFF;							break;					}										z = cha*elevate;										tmpArray.push(new Number3D(x*scalingX, y*scalingY, z))					if(col>w){						var tmp:Array = new Array();						tmp = tmp.concat(tmpArray);						totalArray.push(tmp);						tmpArray = new Array();						row += subdivisionY;						col = 1;					}					i=row*col;				}								tmp = new Array();				for(i = totalArray.length-1;i>0;i--){					tmp.push(totalArray[i]);				}								return tmp;		}			}}